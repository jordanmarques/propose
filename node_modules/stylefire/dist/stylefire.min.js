!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.stylefire={})}(this,function(t){"use strict";var e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},n=function(){};"production"!==process.env.NODE_ENV&&(n=function(t,e){if(!t)throw new Error("Hey, listen! ".toUpperCase()+e)});var r,o=0,a="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),n=Math.max(0,16.7-(e-o));o=e+n,setTimeout(function(){return t(o)},n)};!function(t){t.Read="read",t.Update="update",t.Render="render",t.PostRender="postRender",t.FixedUpdate="fixedUpdate"}(r||(r={}));var i,s=1/60*1e3,u=!0,f=!1,c=!1,d={delta:0,timestamp:0},l=[r.Read,r.Update,r.Render,r.PostRender],p=function(t){return f=t},h=l.reduce(function(t,e){var r,o,a,i,s,u,c,d,l,h=(r=p,o=[],a=[],i=0,s=!1,u=0,c=new WeakSet,d=new WeakSet,l={cancel:function(t){var e=a.indexOf(t);c.add(t),-1!==e&&a.splice(e,1)},process:function(t){var e,n;if(s=!0,o=(e=[a,o])[0],(a=e[1]).length=0,i=o.length)for(u=0;u<i;u++)(n=o[u])(t),!0!==d.has(n)||c.has(n)||(l.schedule(n),r(!0));s=!1},schedule:function(t,e,r){n("function"==typeof t,"Argument must be a function");var u=r&&s,f=u?o:a;e&&d.add(t),-1===f.indexOf(t)&&(f.push(t),u&&(i=o.length))}});return t.sync[e]=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),f||b(),h.schedule(t,e,n),t},t.cancelSync[e]=function(t){return h.cancel(t)},t.steps[e]=h,t},{steps:{},sync:{},cancelSync:{}}),g=h.steps,m=h.sync,v=(h.cancelSync,function(t){return g[t].process(d)}),y=function(t){f=!1,d.delta=u?s:Math.max(Math.min(t-d.timestamp,40),1),u||(s=d.delta),d.timestamp=t,c=!0,l.forEach(v),c=!1,f&&(u=!1,a(y))},b=function(){f=!0,u=!0,c||a(y)},w=function(t){var e=t.onRead,n=t.onRender,r=t.uncachedValues,o=void 0===r?new Set:r,a=t.useCache,i=void 0===a||a;return function(t){var r={},a=[],s=!1,u=function(t,e){var n=r[t];r[t]=e,r[t]!==n&&(-1===a.indexOf(t)&&a.push(t),s||(s=!0,m.render(f)))};function f(e){return void 0===e&&(e=!1),(!0===e||s)&&(n(r,t,a),s=!1,a.length=0),this}return{get:function(n){return n?i&&!o.has(n)&&void 0!==r[n]?r[n]:e(n,t):r},set:function(t,e){if("string"==typeof t){if(void 0===e)return function(e){return u(t,e)};u(t,e)}else for(var n in t)t.hasOwnProperty(n)&&u(n,t[n]);return this},render:f}}},x=/([a-z])([A-Z])/g,O=function(t){return t.replace(x,"$1-$2").toLowerCase()},R=new Map,L=new Map,k=["Webkit","Moz","O","ms",""],S=k.length,T="undefined"!=typeof document,Y=function(t,e){return L.set(t,O(e))},P=function(t,e){void 0===e&&(e=!1);var n=e?L:R;return n.has(t)||(T?function(t){i=i||document.createElement("div");for(var e=0;e<S;e++){var n=k[e],r=""===n,o=r?t:n+t.charAt(0).toUpperCase()+t.slice(1);(o in i.style||r)&&(R.set(t,o),Y(t,(r?"":"-")+O(o)))}}(t):function(t){Y(t,t)}(t)),n.get(t)||t},X=["","X","Y","Z"],C=["scale","rotate","skew","transformPerspective"].reduce(function(t,e){return X.reduce(function(t,n){return t.push(e+n),t},t)},["x","y","z"]),M=C.reduce(function(t,e){return t[e]=!0,t},{}),B=function(t){return!0===M[t]},W=function(t,e){return C.indexOf(t)-C.indexOf(e)},E=function(t){return"originX"===t||"originY"===t},F=function(){return(F=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Z=function(t,e){return function(n){return Math.max(Math.min(n,e),t)}},j=function(t){return function(e){return"string"==typeof e&&0===e.indexOf(t)}},A=function(t){return t%1?Number(t.toFixed(5)):t},z={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},N=F({},z,{transform:Z(0,1)}),U=F({},z,{default:1}),V=function(t){return{test:function(e){return"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}},H=V("deg"),I=V("%"),q=V("px"),$=Z(0,255),_=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,D=function(t){return void 0!==t.red},G=function(t){return void 0!==t.hue},J=function(t){var e=t.length;return function(n){if("string"!=typeof n)return n;for(var r,o={},a=function(t){return"string"==typeof t?t.split(/,\s*/):[t]}((r=n).substring(r.indexOf("(")+1,r.lastIndexOf(")"))),i=0;i<e;i++)o[t[i]]=void 0!==a[i]?parseFloat(a[i]):1;return o}},K=F({},z,{transform:function(t){return Math.round($(t))}}),Q=j("rgb"),tt={test:function(t){return"string"==typeof t?Q(t):D(t)},parse:J(["red","green","blue","alpha"]),transform:function(t){var e=t.red,n=t.green,r=t.blue,o=t.alpha;return function(t){var e=t.red,n=t.green,r=t.blue,o=t.alpha;return"rgba("+e+", "+n+", "+r+", "+(void 0===o?1:o)+")"}({red:K.transform(e),green:K.transform(n),blue:K.transform(r),alpha:A(o)})}},et=j("hsl"),nt={test:function(t){return"string"==typeof t?et(t):G(t)},parse:J(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,n=t.saturation,r=t.lightness,o=t.alpha;return function(t){var e=t.hue,n=t.saturation,r=t.lightness,o=t.alpha;return"hsla("+e+", "+n+", "+r+", "+(void 0===o?1:o)+")"}({hue:Math.round(e),saturation:I.transform(A(n)),lightness:I.transform(A(r)),alpha:A(o)})}},rt=F({},tt,{test:j("#"),parse:function(t){var e="",n="",r="";return t.length>4?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),e+=e,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),ot={test:function(t){return"string"==typeof t&&_.test(t)||tt.test(t)||nt.test(t)||rt.test(t)},parse:function(t){return tt.test(t)?tt.parse(t):nt.test(t)?nt.parse(t):rt.test(t)?rt.parse(t):t},transform:function(t){return D(t)?tt.transform(t):G(t)?nt.transform(t):t}},at={color:ot,backgroundColor:ot,outlineColor:ot,fill:ot,stroke:ot,borderColor:ot,borderTopColor:ot,borderRightColor:ot,borderBottomColor:ot,borderLeftColor:ot,borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,rotate:H,rotateX:H,rotateY:H,rotateZ:H,scale:U,scaleX:U,scaleY:U,scaleZ:U,skew:H,skewX:H,skewY:H,distance:q,x:q,y:q,z:q,perspective:q,opacity:N,originX:I,originY:I,originZ:q},it=function(t){return at[t]},st=new Set(["scrollLeft","scrollTop"]),ut=new Set(["scrollLeft","scrollTop","transform"]),ft={x:"translateX",y:"translateY",z:"translateZ"},ct=function(t){return"function"==typeof t},dt=function(t,e,n,r,o,a){void 0===e&&(e=!0),void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o={}),void 0===a&&(a=[]);var i=!0,s=!1,u=!1;for(var f in t){var c=t[f],d=it(f),l="number"==typeof c&&d?d.transform(c):c;B(f)?(s=!0,r[f]=l,a.push(f),i&&(d.default&&c!==d.default||!d.default&&0!==c)&&(i=!1)):E(f)?(o[f]=l,u=!0):ut.has(f)&&ct(l)||(n[P(f,!0)]=l)}if(i)s&&(n.transform="none");else{var p="";if(ct(t.transform))p=t.transform(r);else{var h=!1;a.sort(W);for(var g=a.length,m=0;m<g;m++){f=a[m];p+=(ft[f]||f)+"("+r[f]+") ",h="z"===f||h}!h&&e&&(p+="translateZ(0)")}n.transform=p}return u&&(n.transformOrigin=(o.originX||0)+" "+(o.originY||0)+" "+(o.originZ||0)),n},lt=w({onRead:function(t,e){var n=e.element,r=e.preparseOutput,o=it(t);if(B(t))return o&&o.default||0;if(st.has(t))return n[t];var a=window.getComputedStyle(n,null).getPropertyValue(P(t,!0))||0;return r&&o&&o.parse?o.parse(a):a},onRender:function(t,e,n){var r=e.element,o=e.buildStyles;Object.assign(r.style,o(t)),-1!==n.indexOf("scrollLeft")&&(r.scrollLeft=t.scrollLeft),-1!==n.indexOf("scrollTop")&&(r.scrollTop=t.scrollTop)},uncachedValues:st}),pt=function(t,n){return lt(e({element:t,buildStyles:function(t){void 0===t&&(t=!0);var e={},n={},r={},o=[];return function(a){return o.length=0,dt(a,t,e,n,r,o),e}}(),preparseOutput:!0},n))},ht=function(t,e){return t/100*e+"px"},gt={fill:ot,stroke:ot,scale:U,scaleX:U,scaleY:U,opacity:N,fillOpacity:N,strokeOpacity:N},mt=w({onRead:function(t,e){var n=e.element;if(B(t)){var r=function(t){return gt[t]}(t);return r?r.default:0}return n.getAttribute(t)},onRender:function(t,e){var n=e.dimensions;!function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}(e.element,function(t,e,n,r){var o=!1,a=!1,i={},s=n?{pathLength:"0",pathSpacing:""+r}:void 0,u=void 0!==t.scale?t.scale||1e-7:t.scaleX||1,f=void 0!==t.scaleY?t.scaleY||1e-7:u||1,c=e.width*((t.originX||50)/100)+e.x,d=e.height*((t.originY||50)/100)+e.y,l=1*u*-c,p=1*f*-d,h=c/u,g=d/f,m={translate:"translate("+t.x+", "+t.y+") ",scale:"translate("+l+", "+p+") scale("+u+", "+f+") translate("+h+", "+g+") ",rotate:"rotate("+t.rotate+", "+c+", "+d+") ",skewX:"skewX("+t.skewX+") ",skewY:"skewY("+t.skewY+") "};for(var v in t)if(t.hasOwnProperty(v)){var y=t[v];B(v)?o=!0:!n||"pathLength"!==v&&"pathSpacing"!==v||"number"!=typeof y?n&&"pathOffset"===v?i["stroke-dashoffset"]=ht(-y,r):i[O(v)]=y:(a=!0,s[v]=ht(y,r))}if(a&&(i["stroke-dasharray"]=s.pathLength+" "+s.pathSpacing),o)for(var v in i.transform="",m)if(m.hasOwnProperty(v)){var b="scale"===v?"1":"0";i.transform+=m[v].replace(/undefined/g,b)}return i}(t,n,e.isPath,e.pathLength))}}),vt=w({useCache:!1,onRead:function(t){return"scrollTop"===t?window.pageYOffset:window.pageXOffset},onRender:function(t){var e=t.scrollTop,n=void 0===e?0:e,r=t.scrollLeft,o=void 0===r?0:r;return window.scrollTo(o,n)}}),yt=new WeakMap,bt=function(t,e){var r;return t instanceof HTMLElement?r=pt(t,e):t instanceof SVGElement?r=function(t){var e="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect(),n={element:t,dimensions:{x:e.x,y:e.y,width:e.width,height:e.height},isPath:!1};return"path"===t.tagName&&(n.isPath=!0,n.pathLength=t.getTotalLength()),mt(n)}(t):t===window&&(r=vt(t)),n(void 0!==r,"No valid node provided. Node must be HTMLElement, SVGElement or window."),yt.set(t,r),r},wt=function(t,e){return yt.has(t)?yt.get(t):bt(t,e)};t.default=function(t,e){var n="string"==typeof t?document.querySelector(t):t;return wt(n,e)},t.createStylerFactory=w,t.buildStyleProperty=dt,Object.defineProperty(t,"__esModule",{value:!0})});
